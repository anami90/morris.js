(function(){var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e=window.Extra={},e.Column=function(t){function r(t){this.el=$(t.element),this.options=$.extend({},e.Column.defaults,t),this.update(this.options.data)}return n(r,t),r.defaults={positiveColor:"#ff4400",negativeColor:"#bbbbbb",positiveTextColor:"#ff4400",negativeTextColor:"#777777",precision:2,lines:9},r.prototype._createBar=function(e){var t,n,r,i,s=this;this.el.html(""),i=null,r=null,this.data=[];for(t in e)n=e[t],n=parseFloat((n*100).toFixed(this.options.precision)),i=Math.min(i,n),r=Math.max(r,n),this.data.push({x:t,y:n});return r=Math.abs(this.nearestTen(r)),i=Math.abs(this.nearestTen(i)),r=Math.max(r,i),i=-r,this.bar=new Morris.Bar({element:this.el,data:this.data,ymin:i,ymax:r,barGap:50,barSizeRatio:.5,hideHover:"always",numLines:this.options.lines,numYLabels:Math.floor(this.options.lines/2)+1,xkey:"x",ykeys:["y"],labels:["Y"],gridTextColor:"#444",gridTextWeight:"bold",gridTextSize:10.5,gridLineColor:"#bbb",goals:[0],goalStrokeWidth:.5,goalLineColors:["#999"],eventLineColors:["#999"],xLabelMargin:0,barColors:function(e){return e.y>0?s.options.positiveColor:s.options.negativeColor},yLabelFormat:function(e){return""+e+"%"}})},r.prototype._createValueSpans=function(){var e,t,n,r,i,s,o,u,a,f,l,c;l=this.data,c=[];for(n=a=0,f=l.length;a<f;n=++a)s=l[n],t=this.bar.width/this.bar.options.data.length,r=t*(1-this.bar.options.barSizeRatio)/2,i=this.bar.options.ykeys.length,e=(t*this.bar.options.barSizeRatio-this.bar.options.barGap*(i-1))/i,o=$("<span/>").text(""+s.y+"%").addClass("value-span"),u=this.bar.left+n*t+r,s.y>0?(o.css("top",this.bar.transY(0)+5+"px"),o.css("color",this.options.positiveTextColor)):(o.css("top",this.bar.transY(0)-15+"px"),o.css("color",this.options.negativeTextColor)),o.css({font:"bold 10px Arial, sans-serif",display:"block",position:"absolute",width:e+"px",textAlign:"center",left:Math.round(u)+"px"}),c.push(this.el.append(o));return c},r.prototype._createSplitLine=function(){var e;return e=$("<span/>"),e.css({position:"absolute",display:"block",width:"1px",height:this.bar.height+40+"px",top:this.bar.top-20+"px",left:this.bar.left+"px",background:"#bbb"}),this.el.append(e)},r.prototype.update=function(e){return this._createBar(e),this._createValueSpans(),this._createSplitLine()},r.prototype.nearestTen=function(e){var t;return t=e<0?-1:1,e=10+10*Math.floor(Math.abs(e)/10),t*e},r}(Morris.EventEmitter)}).call(this);